<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Made with love</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="love letter 2.css" />
  </head>
  <body>

    <div class="envlope-wrapper">
      <div id="envelope" class="close">
        <div class="front flap"></div>
        <div class="front pocket"></div>
        <div class="letter">
          <div class="words line1">To: Chinne</div>
          <div class="words line2">Dear Chinne, my world is dark.</div>
          <div class="words line3">You bring all the colors in one,</div>
          <div class="words line4">At full brightness,</div>
        </div>
        <div class="hearts">
          <div class="heart a1"></div>
          <div class="heart a2"></div>
          <div class="heart a3"></div>
        </div>
      </div>
    </div>
    <div class="reset">
      <button id="open">Open</button>
      <button id="reset">Close</button>
    </div>

    <audio id="bg-music" loop>
      <source src="kahel na langit.mp3" type="audio/mpeg" />
    </audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="love letter 2.js"></script>

    <script>
      const music = document.getElementById("bg-music");
      music.volume = 0; 


      function fadeIn(audio, duration = 3000) {
        let step = 0.05;
        let interval = duration / (1 / step);
        audio.volume = 0;
        audio.play();
        let fade = setInterval(() => {
          if (audio.volume < 1) {
            audio.volume = Math.min(1, audio.volume + step);
          } else {
            clearInterval(fade);
          }
        }, interval);
      }


      function fadeOut(audio, duration = 3000) {
        let step = 0.05;
        let interval = duration / (1 / step);
        let fade = setInterval(() => {
          if (audio.volume > 0) {
            audio.volume = Math.max(0, audio.volume - step);
          } else {
            audio.pause();
            clearInterval(fade);
          }
        }, interval);
      }


      document.addEventListener("DOMContentLoaded", () => {
        music.play().then(() => {
          fadeIn(music);
        }).catch(() => {

          document.getElementById("open").addEventListener("click", () => {
            fadeIn(music);
          });
        });
      });

      document.getElementById("reset").addEventListener("click", () => {
        fadeOut(music);
      });
    </script>
  </body>
</html>
